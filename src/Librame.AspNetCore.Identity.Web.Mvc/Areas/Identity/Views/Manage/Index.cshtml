@model IndexViewModel
@{
    var localizer = ViewBag.Localizer as IHtmlLocalizer<IndexViewResource>;
    ViewData["Title"] = localizer.GetString(r => r.Title);
}

<!-- Index -->
<h4>@localizer.GetString(r => r.ChangeAccountSettings)</h4>

<p class="text-success">@ViewData["StatusMessage"]</p>

<div class="row">
    <div class="col-md-10">
        <div class="form-horizontal">
            <div class="form-group">
                <h5>@localizer.GetString(r => r.Password)</h5>

                @if (Model.HasPassword)
                {
                    <text>
                        [&nbsp;&nbsp;
                        <a asp-controller="Manage" asp-action="ChangePassword"
                           asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                           asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                            @localizer.GetString(r => r.ChangePassword)
                        </a>
                        &nbsp;&nbsp;]
                    </text>
                }
                else
                {
                    <text>
                        [&nbsp;&nbsp;
                        <a asp-controller="Manage" asp-action="SetPassword"
                           asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                           asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                            @localizer.GetString(r => r.SetPassword)
                        </a>
                        &nbsp;&nbsp;]
                    </text>
                }
            </div>

            <div class="form-group">
                <h5>@localizer.GetString(r => r.ExternalLogins)</h5>

                @Model.Logins.Count
                [&nbsp;&nbsp;
                    <a asp-controller="Manage" asp-action="ManageLogins"
                       asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                       asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                        @localizer.GetString(r => r.ManageLogins)
                    </a>
                &nbsp;&nbsp;]
            </div>

            <div class="form-group">
                <h5>@localizer.GetString(r => r.PhoneNumber)</h5>

                <!--<p>
                    Phone Numbers can used as a second factor of verification in two-factor authentication.
                    See <a href="http://go.microsoft.com/fwlink/?LinkID=532713">this article</a>
                    for details on setting up this ASP.NET application to support two-factor authentication using SMS.
                </p>-->
                @(Model.PhoneNumber ?? localizer.GetString(r => r.NonePhoneNumber).Value)
                @if (Model.PhoneNumber != null)
                {
                    <br />
                    <text>
                        [&nbsp;&nbsp;
                        <a asp-controller="Manage" asp-action="AddPhoneNumber"
                           asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                           asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                            @localizer.GetString(r => r.ChangePhoneNumber)
                        </a>
                        &nbsp;&nbsp;]
                    </text>

                    <form method="post" role="form" asp-controller="Manage" asp-action="RemovePhoneNumber"
                          asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                          asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                        [<button type="submit" class="btn-link">@localizer.GetString(r => r.RemovePhoneNumber)</button>]
                    </form>
                }
                else
                {
                    <text>
                        [&nbsp;&nbsp;
                        <a asp-controller="Manage" asp-action="AddPhoneNumber"
                           asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                           asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                            @localizer.GetString(r => r.AddPhoneNumber)
                        </a>
                        &nbsp;&nbsp;]
                    </text>
                }
            </div>

            <div class="form-group">
                <h5>@localizer.GetString(r => r.TwoFactorAuthentication)</h5>

                <!--<p>
                    There are no two-factor authentication providers configured. See <a href="http://go.microsoft.com/fwlink/?LinkID=532713">this article</a>
                    for setting up this application to support two-factor authentication.
                </p>-->
                @if (Model.TwoFactor)
                {
                    <form method="post" class="form-horizontal" role="form" asp-controller="Manage" asp-action="DisableTwoFactorAuthentication"
                           asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                           asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                        @localizer.GetString(r => r.EnableTwoFactor) [<button type="submit" class="btn-link">@localizer.GetString(r => r.DisableTwoFactor)</button>]
                    </form>
                }
                else
                {
                    <form method="post" class="form-horizontal" role="form" asp-controller="Manage" asp-action="EnableTwoFactorAuthentication"
                           asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                           asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                        [<button type="submit" class="btn-link">@localizer.GetString(r => r.EnableTwoFactor)</button>] @localizer.GetString(r => r.DisableTwoFactor)
                    </form>
                }
            </div>

            <div class="form-group">
                <h5>@localizer.GetString(r => r.AuthenticationApp)</h5>

                @if (Model.AuthenticatorKey == null)
                {
                    <form method="post" class="form-horizontal" role="form" asp-controller="Manage" asp-action="ResetAuthenticatorKey"
                           asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                           asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                        [<button type="submit" class="btn-link">@localizer.GetString(r => r.ResetAuthenticatorKey)</button>]
                    </form>
                }
                else
                {
                    <text>@localizer.GetString(r => r.YourKeyIs) @Model.AuthenticatorKey</text>
                    <form method="post" class="form-horizontal" role="form" asp-controller="Manage" asp-action="GenerateRecoveryCode"
                           asp-route-culture="@ViewContext.HttpContext.Request.Query["culture"]"
                           asp-route-uiculture="@ViewContext.HttpContext.Request.Query["uiculture"]">
                        [<button type="submit" class="btn-link">@localizer.GetString(r => r.GenerateRecoveryCode)</button>]
                    </form>
                }
            </div>
        </div>
    </div>
</div>